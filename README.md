# TerraGroupLabs — Первое задание. Первый этап

Мы команда TerraGroupLabs. Наше решение основано на использовании OCR возможностями tesseract, а также применении языка описания шаблонов собственной разработки. На данный момент решение рассчитано на распознавание первой формы.

## Загрузка

Клонируйте репозиторий в отдельную папку.

## Установка

Чтобы установить все необходимые библиотеки достаточно запустить start.sh:

`$ chmod 777 ./start.sh && ./start.sh`

После этого можно запустить скрипт:

`$ ./main.py <path_to_image>`

## Принцип работы

Алгоритм находит на изображении четырехугольник, заключающий в себе объект наиболее сильно напоминающий искомое заявление. Затем с помощью преобразований над выделенным фрагментом изображия, мы получаем его неискаженную версию. Ее обрабатывает tesseract и на выходе мы получаем данные по всем найденным фрагментам текста. После этого мы сравниваем данные с шаблоном формы(см. <a href='#универсальность'>Универсальность</a>) и выводит "ok" в случае совпадения.

## Универсальность

Чтобы не приходилось переписывать программу при изменении структуры искомого документа, а также для удобства проектирования программы в целом, нами был разработан декларативный язык описания шаблонов распознаваемых документов. Он основан на json, файл с описанием форм, должен содержать в себе словарь, где ключом является название формы, а значением - соответствующее форме Требование. 

Требование(Requirement) является базовым классом для любого требования, предъявляемого к документу. 

На данный момент в языке реализовано 4 различных Требования:
<ol>
  <li>Требование Текст(RequiredText) требует нахождения в распознанном тексте некоторого шаблона.</li>
  <li>Требование Форма(RequiredForm) требует нахождения письма между якорями.</li>
  <li>Требование Блок(RequiredBlock) требует одновременного выполнения множества входящих в него Требований.</li>
  <li>Требование Опция(RequiredOption) требует выполнения хотя бы одного Требования из множества входящих в него Требований.</li>
</ol>



## Область применения

Алгоритм не работает в ряде случаев:
<ol>
  <li>Хотя бы в одном месте фотографии оно представлено в недостаточно высоком для распознавания текста разрешении</li>
  <li>При заполнении формы человек так или иначе заденет слова из формы</li>
  <li>Изображение документа в расфокусе.</li>
  <li>Изображение документа на неконтрастном фоне под плохим освещением.</li>
</ol>
    
## Команда

Гурьянов Евгений(капитан) https://github.com/ekinohito

Керимов Нураддин https://github.com/kaizer-nurik

Клиентов Григорий https://github.com/NOTfedos

Сулейманов Дмитрий https://github.com/frake23 (отображается как Your Name)

## Пояснения к принятым решениям

#### Почему OCR

Гарантированно низкое количество FP результатов
